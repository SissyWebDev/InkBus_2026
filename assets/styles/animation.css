/* Container for the animated Markoon */
.markoon-container {
  position: absolute;
  left: 0;
  width: 100%;
  height: 0; /* No height to avoid affecting layout */
  pointer-events: none; /* Doesn't interfere with clicks */
  overflow: visible;
  z-index: 10; /* Above footer content, below main nav */
  overflow-x: clip;
}

/* The animated image itself */
.markoon-runner {
  position: absolute;
  bottom: 0;
  width: clamp(120px, 25vw, 150px);
  height: auto;
  will-change: transform;
  animation: markoon-journey 4s linear 1 0.5s;
  animation-fill-mode: backwards;
  border: none;
  margin-bottom: 21px;
  opacity: 0;
  right: 0;
  transform: translate3d(100%, 0, 0); /* Force Chrome GPU: Less Jerky, Scrollbar Hidden */
  backface-visibility: hidden;
  contain: layout paint;
}

/* Journey animation: right to left, flip, left to right */
@keyframes markoon-journey {
  0% {
    transform: translate3d(150%, 0, 0) scaleX(1);
    opacity: 1;
  }
  
  45.9% {
    opacity: 1; /* Still visible */
  }
  
  46% {  
    transform: translate3d(calc(-100vw - 30vw), 0, 0) scaleX(1); /* Move to -130vw */
    opacity: 0; /* Instant invisible */
  }
  
  46.1% {
    transform: translate3d(calc(-100vw - 30vw), 0, 0) scaleX(-1); /* Flip */
    opacity: 0; /* Stay invisible during flip */
  }
  
  69% {  
    transform: translate3d(calc(-100vw - 30vw), 0, 0) scaleX(-1);
    opacity: 0; /* Still invisible */
  }
  
  69.1% {
    opacity: 1; /* Instant visible for return trip */
  }
  
  85% {  
    transform: translate3d(calc(-50vw + 50%), 0, 0) scaleX(-1);
    opacity: 1;
  }
  
  100% {  
    transform: translate3d(150%, 0, 0) scaleX(-1);
    opacity: 1;
  }
}

/* Button spin animation - triggered by Markoon's hand */
.main-nav-btn.spin-on-bump {
  animation: button-spin-mobile 4.267s ease-in-out 1 1s;
  animation-fill-mode: forwards;
  transform-origin: center center;
}

/* Mobile: flat spin (rotateZ) */
@keyframes button-spin-mobile {
  0%, 68% {
    transform: rotate(0deg);
  }
  
  69% {
    transform: rotate(0deg); /* Moment of contact */
  }
  
  76% {
    transform: rotate(1800deg); /* 3 full spins (360deg × 5) */
  }
  
  100% {
    transform: rotate(1080deg); /* Hold */
  }
}

@media screen and (min-width: 576px) {
  .markoon-runner {
    margin-bottom: 44px;
  }
}

@media screen and (min-width: 768px) {
  .markoon-runner {
    animation: markoon-journey 4.25s linear 1 1s;
  }

    
  /* Button spin animation - triggered by Markoon's hand*/ 
  .main-nav-btn.spin-on-bump {
    animation: button-spin-mobile 4.53s ease-in-out 1 1s;
  }
    
  /* Mobile: flat spin (rotateZ)*/ 
  @keyframes button-spin-mobile {
    0%, 78% {
      transform: rotate(0deg);
    }
      
    86% {
      transform: rotate(0deg); /* Moment of contact*/ 
    }
      
    87% {
      transform: rotate(1800deg); /* 5 full spins (360deg × 5)*/ 
    }

    93% {
      transform: rotate(1080deg); /* 2 back spins*/
    }
      
    100% {
      transform: rotate(1080deg); /* Hold*/ 
    }
  }
}

@media screen and (min-width: 992px) {

    .markoon-runner {
      animation: markoon-journey 5.25s linear 1 1s;
    }
    
    /* Button spin animation - triggered by Markoon's hand */
      .main-nav-btn.spin-on-bump {
        animation: button-spin-mobile 5.553s ease-in-out 1 1s;
      }
    
    /* Mobile: flat spin (rotateZ) */
    @keyframes button-spin-mobile {
      0%, 75% {
        transform: rotate(0deg);
      }
      
      87% {
        transform: rotate(0deg); /* Moment of contact */
      }
      
      88% {
        transform: rotate(1800deg); /* 3 full spins (360deg × 5) */
      }
      
      100% {
        transform: rotate(1080deg); /* Hold */
      }
    }
}

@media screen and (min-width: 1200px) {

    .markoon-runner {
    animation: markoon-journey 6s linear 1 1s;
    }
    
    /* Button spin animation - triggered by Markoon's hand */
      .main-nav-btn.spin-on-bump {
        animation: button-spin-mobile 6.53s ease-in-out 1 1s;
      }
    
    /* Mobile: flat spin (rotateZ) */
    @keyframes button-spin-mobile {
      0%, 81% {
        transform: rotate(0deg);
      }
      
      81% {
        transform: rotate(0deg); /* Moment of contact */
      }
      
      87% {
        transform: rotate(1800deg); /* 3 full spins (360deg × 5) */
      }
      
      97% {
        transform: rotate(1080deg); /* Hold */
      }
    }
}